<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Monitoring Dashboard</title>
<link rel="icon" href="https://ia601205.us.archive.org/12/items/icon_20250717/icon.png" type="image/png">

<!-- External CSS -->
<link rel="stylesheet" href="dashboard.css">

<!-- Leaflet CSS & JS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<!-- Leaflet MarkerCluster -->
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
<script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
</head>
<body>

<!-- Top bar -->
<div class="card" style="background: rgba(255,255,255,0.95); border-radius: 0.75rem; box-shadow: 0 4px 16px rgba(0,0,0,0.15), 0 1.5px 6px rgba(0,0,0,0.07); padding: 0.5rem 1rem; margin: 0.5rem 0; max-width: 320px; float: right;">
  <div class="flex flex-col items-end gap-2">
    <button 
      onclick="logout()" 
      style="background: linear-gradient(90deg,#ff5f6d,#ffc371); color: #fff; border: none; padding: 0.4rem 1.2rem; font-size: 0.95rem; font-weight: 600; border-radius: 0.5rem; box-shadow: 0 1px 4px rgba(255,95,109,0.15); cursor: pointer; transition: background 0.2s;"
      onmouseover="this.style.background='#ff5f6d'"
      onmouseout="this.style.background='linear-gradient(90deg,#ff5f6d,#ffc371)'"
    >
      Logout
    </button>
    <div class="flex flex-col items-end text-lg font-medium text-blue-600 leading-tight">
      <p id="ph-date"></p>
      <p id="ph-time"></p>
      <div id="user-info" class="flex items-center gap-2 text-lg font-medium text-gray-700 mt-1">
        <img src="https://via.placeholder.com/36" alt="Profile Photo" style="width:36px;height:36px;border-radius:50%;border:1px solid #ccc;">
        <span id="user-name">John Doe</span>
      </div>
    </div>
  </div>
</div>

<!-- Dashboard Title -->
<h1 class="dashboard-title">
  Forest Products Transport<br>
  Monitoring Dashboard<br>
  <span class="checkpoint">Km. 48 Checkpoint</span>
</h1>

<div class="controls">
  <div class="left-controls">
    <input type="text" id="searchInput" class="search-box" placeholder="Search records..." onkeyup="filterTable()">
    <div class="month-nav">
      <button class="btn" onclick="changeMonth(-1)">← Prev</button>
      <span id="monthLabel">--</span>
      <button class="btn" onclick="changeMonth(1)">Next →</button>
    </div>
  </div>
</div>

<!-- Extra navigation buttons -->
<div class="link-buttons">
  <a href="/analytics/" class="nav-btn">Analytics</a>
  <a href="/form" class="nav-btn">Forms</a>
</div>

<!-- Data table -->
<table id="dataTable">
  <thead>
    <tr id="tableHeader"></tr>
  </thead>
  <tbody id="tableBody"></tbody>
  <tfoot id="tableFooter"></tfoot>
</table>

<div id="noDataMessage" class="no-data" style="display:none;">No records for selected month.</div>

<!-- Map container -->
<div id="map"></div>

<script type="module" src="dashboard.js"></script>
</body>
</html>
